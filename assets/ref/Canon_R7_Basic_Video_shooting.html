<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canon R7 Basic Video Shooting</title>
    <!-- 樣式表 -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- Font Awesome 圖標 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 添加用戶數據庫腳本 -->
    <script src="assets/js/users.js"></script>
    <!-- 自定義樣式 -->
    <style>
        body {
            padding-bottom: 60px;
            background-color: var(--background-color);
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: #FFFFFF;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .top-bar-logo {
            max-height: 32px;
        }

        .top-bar-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .icon-btn {
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            color: var(--primary-color);
            background-color: rgba(26, 115, 232, 0.1);
        }
        
        .back-button {
            display: flex;
            align-items: center;
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
        }

        .back-button i {
            margin-right: 0.5rem;
        }

        .course-container {
            padding: 1rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .course-header {
            background-color: var(--primary-color);
            border-radius: 12px;
            padding: 2rem;
            color: #FFFFFF;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .course-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .course-details {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
        }

        .course-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .detail-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .detail-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .progress-container {
            background-color: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: 4px;
            margin: 1.5rem 0 0.5rem;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            background-color: #FFFFFF;
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .module-section {
            margin-bottom: 2rem;
        }

        .module-header {
            background-color: #FFFFFF;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .module-header:hover {
            background-color: #F5F5F5;
        }

        .module-header.active {
            background-color: rgba(26, 115, 232, 0.1);
        }

        .module-title {
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .module-title i {
            margin-right: 0.75rem;
            font-size: 1.25rem;
            color: var(--primary-color);
        }

        .module-status {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .status-tag {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-complete {
            background-color: var(--success-color);
            color: #FFFFFF;
        }

        .status-current {
            background-color: var(--primary-color);
            color: #FFFFFF;
        }

        .status-pending {
            background-color: var(--light-gray);
            color: var(--text-secondary);
        }

        .module-toggle {
            color: var(--text-secondary);
            transition: transform 0.3s;
        }

        .module-toggle.active {
            transform: rotate(180deg);
        }

        .module-content {
            background-color: #FFFFFF;
            border-radius: 0 0 8px 8px;
            padding: 0 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .module-content.active {
            max-height: 1000px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .lesson-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .lesson-item:last-child {
            border-bottom: none;
        }

        .lesson-check {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--light-gray);
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-size: 0.75rem;
        }

        .lesson-check.complete {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }

        .lesson-check.current {
            border-color: var(--primary-color);
        }

        .lesson-title {
            flex: 1;
        }

        .lesson-duration {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .video-container {
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1.5rem;
            position: relative;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .quiz-section {
            background-color: #FFFFFF;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .quiz-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 0.75rem;
        }

        .quiz-question {
            margin-bottom: 1.5rem;
        }

        .quiz-question-text {
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background-color: rgba(26, 115, 232, 0.05);
        }

        .quiz-option.selected {
            background-color: rgba(26, 115, 232, 0.1);
            border-color: var(--primary-color);
        }

        .quiz-option.correct {
            background-color: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
        }

        .quiz-option.incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border-color: var(--error-color);
        }

        .option-radio {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid var(--light-gray);
            margin-right: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option-radio.selected {
            border-color: var(--primary-color);
        }

        .option-radio.selected::after {
            content: '';
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--primary-color);
        }

        .option-radio.correct {
            border-color: var(--success-color);
            background-color: var(--success-color);
            color: #FFFFFF;
        }

        .option-radio.incorrect {
            border-color: var(--error-color);
        }

        .option-text {
            flex: 1;
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .feedback-correct {
            background-color: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }

        .feedback-incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            border: 1px solid var(--error-color);
            color: var(--error-color);
        }

        .course-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .course-actions .btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .course-certificate {
            background-color: #FFFFFF;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: none;
        }
        
        .certificate-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .certificate-image {
            width: 100%;
            max-width: 300px;
            margin: 1rem auto;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
        }
        
        .certificate-congrats {
            margin-bottom: 1rem;
            color: var(--success-color);
            font-weight: 600;
        }
        
        .points-earned {
            display: inline-block;
            background-color: var(--accent-color);
            color: #FFFFFF;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-weight: 600;
            margin-top: 1rem;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body>
    <!-- 頂部選單 -->
    <div class="top-bar">
        <a href="learn.html" class="back-button">
            <i class="fas fa-arrow-left" aria-hidden="true"></i>
            <span>返回課程列表</span>
        </a>
        <div class="top-bar-actions">
            <div class="language-switcher">
                <label for="language-switcher" class="sr-only">Select Language</label>
                <select id="language-switcher" aria-label="Change language" title="Select language">
                    <option value="en">English</option>
                    <option value="zh-TW">繁體中文</option>
                </select>
            </div>
            <button class="icon-btn" aria-label="Notifications" title="Notifications">
                <i class="fas fa-bell" aria-hidden="true"></i>
            </button>
            <button class="icon-btn" aria-label="Scan QR Code" title="Scan QR Code">
                <i class="fas fa-qrcode" aria-hidden="true"></i>
            </button>
            <a href="connect.html" class="icon-btn" aria-label="Connect Chat" title="聊天室">
                <i class="fas fa-comments" aria-hidden="true"></i>
            </a>
        </div>
    </div>

    <!-- 課程內容 -->
    <div class="course-container">
        <!-- 課程標題與進度 -->
        <div class="course-header">
            <h1 class="course-title">Canon R7 基礎視頻拍攝</h1>
            <p>學習使用 Canon EOS R7 進行基礎視頻拍攝，以及掌握相機設置、構圖和實用技巧</p>
            
            <div class="course-details">
                <div class="course-detail">
                    <div class="detail-value">5</div>
                    <div class="detail-label">章節</div>
                </div>
                <div class="course-detail">
                    <div class="detail-value">28</div>
                    <div class="detail-label">分鐘</div>
                </div>
                <div class="course-detail">
                    <div class="detail-value">100</div>
                    <div class="detail-label">積分</div>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="courseProgress"></div>
            </div>
            <div class="progress-text"><span id="progressPercent">0%</span> 完成</div>
        </div>

        <!-- 當前學習模組 -->
        <div class="module-section">
            <h2 class="current-module-title">當前章節：Canon R7 簡介與基本設置</h2>
            
            <!-- 視頻模塊 -->
            <div class="video-container">
                <iframe id="courseVideo" 
                        src="https://www.youtube.com/embed/vgiDcJi534Y" 
                        title="Canon R7 基礎視頻拍攝" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen></iframe>
            </div>
            
            <!-- 測驗模塊 -->
            <div class="quiz-section">
                <h3 class="quiz-title">章節測驗</h3>
                
                <div class="quiz-question">
                    <p class="quiz-question-text">1. Canon EOS R7 的感光元件類型是什麼？</p>
                    <div class="quiz-options">
                        <div class="quiz-option" data-value="A">
                            <div class="option-radio"></div>
                            <div class="option-text">A. 全畫幅 (Full Frame)</div>
                        </div>
                        <div class="quiz-option" data-value="B">
                            <div class="option-radio"></div>
                            <div class="option-text">B. APS-C</div>
                        </div>
                        <div class="quiz-option" data-value="C">
                            <div class="option-radio"></div>
                            <div class="option-text">C. 中畫幅 (Medium Format)</div>
                        </div>
                        <div class="quiz-option" data-value="D">
                            <div class="option-radio"></div>
                            <div class="option-text">D. Micro Four Thirds</div>
                        </div>
                    </div>
                    <div class="quiz-feedback feedback-correct">
                        正確！Canon EOS R7 搭載 APS-C 感光元件。
                    </div>
                    <div class="quiz-feedback feedback-incorrect">
                        不正確。Canon EOS R7 搭載 APS-C 感光元件。
                    </div>
                </div>
                
                <div class="quiz-question">
                    <p class="quiz-question-text">2. 以下哪個設置可以調整視頻的曝光？</p>
                    <div class="quiz-options">
                        <div class="quiz-option" data-value="A">
                            <div class="option-radio"></div>
                            <div class="option-text">A. 白平衡</div>
                        </div>
                        <div class="quiz-option" data-value="B">
                            <div class="option-radio"></div>
                            <div class="option-text">B. 對焦模式</div>
                        </div>
                        <div class="quiz-option" data-value="C">
                            <div class="option-radio"></div>
                            <div class="option-text">C. 快門速度</div>
                        </div>
                        <div class="quiz-option" data-value="D">
                            <div class="option-radio"></div>
                            <div class="option-text">D. 視頻格式</div>
                        </div>
                    </div>
                    <div class="quiz-feedback feedback-correct">
                        正確！快門速度是影響視頻曝光的主要參數之一。
                    </div>
                    <div class="quiz-feedback feedback-incorrect">
                        不正確。快門速度是影響視頻曝光的主要參數之一。
                    </div>
                </div>
                
                <div class="quiz-question">
                    <p class="quiz-question-text">3. Canon R7 最高可以錄製哪種解析度的視頻？</p>
                    <div class="quiz-options">
                        <div class="quiz-option" data-value="A">
                            <div class="option-radio"></div>
                            <div class="option-text">A. 1080p (Full HD)</div>
                        </div>
                        <div class="quiz-option" data-value="B">
                            <div class="option-radio"></div>
                            <div class="option-text">B. 4K (Ultra HD)</div>
                        </div>
                        <div class="quiz-option" data-value="C">
                            <div class="option-radio"></div>
                            <div class="option-text">C. 6K</div>
                        </div>
                        <div class="quiz-option" data-value="D">
                            <div class="option-radio"></div>
                            <div class="option-text">D. 8K</div>
                        </div>
                    </div>
                    <div class="quiz-feedback feedback-correct">
                        正確！Canon R7 最高可以錄製 4K 解析度的視頻。
                    </div>
                    <div class="quiz-feedback feedback-incorrect">
                        不正確。Canon R7 最高可以錄製 4K 解析度的視頻。
                    </div>
                </div>
            </div>
        </div>

        <!-- 所有課程模組 -->
        <div class="module-section">
            <h2>課程章節</h2>
            
            <!-- 模組 1 -->
            <div class="module-item">
                <div class="module-header active" data-module="1">
                    <div class="module-title">
                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                        <span>模組 1：Canon R7 簡介與基本設置</span>
                    </div>
                    <div class="module-status">
                        <span class="status-tag status-current">進行中</span>
                        <i class="fas fa-chevron-down module-toggle active" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="module-content active">
                    <div class="lesson-item" data-lesson="1-1">
                        <div class="lesson-check complete">
                            <i class="fas fa-check" aria-hidden="true"></i>
                        </div>
                        <div class="lesson-title">1.1 Canon R7 相機概述</div>
                        <div class="lesson-duration">3:45</div>
                    </div>
                    <div class="lesson-item" data-lesson="1-2">
                        <div class="lesson-check current"></div>
                        <div class="lesson-title">1.2 菜單與基本設置</div>
                        <div class="lesson-duration">5:20</div>
                    </div>
                    <div class="lesson-item" data-lesson="1-3">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">1.3 視頻模式設置</div>
                        <div class="lesson-duration">4:15</div>
                    </div>
                </div>
            </div>
            
            <!-- 模組 2 -->
            <div class="module-item">
                <div class="module-header" data-module="2">
                    <div class="module-title">
                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                        <span>模組 2：基礎拍攝技巧</span>
                    </div>
                    <div class="module-status">
                        <span class="status-tag status-pending">未開始</span>
                        <i class="fas fa-chevron-down module-toggle" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="module-content">
                    <div class="lesson-item" data-lesson="2-1">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">2.1 構圖基礎</div>
                        <div class="lesson-duration">4:50</div>
                    </div>
                    <div class="lesson-item" data-lesson="2-2">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">2.2 曝光三角</div>
                        <div class="lesson-duration">5:30</div>
                    </div>
                </div>
            </div>
            
            <!-- 模組 3 -->
            <div class="module-item">
                <div class="module-header" data-module="3">
                    <div class="module-title">
                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                        <span>模組 3：訪談拍攝技巧</span>
                    </div>
                    <div class="module-status">
                        <span class="status-tag status-pending">未開始</span>
                        <i class="fas fa-chevron-down module-toggle" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="module-content">
                    <div class="lesson-item" data-lesson="3-1">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">3.1 訪談場景設置</div>
                        <div class="lesson-duration">4:10</div>
                    </div>
                    <div class="lesson-item" data-lesson="3-2">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">3.2 訪談鏡頭選擇</div>
                        <div class="lesson-duration">3:45</div>
                    </div>
                </div>
            </div>
            
            <!-- 模組 4 -->
            <div class="module-item">
                <div class="module-header" data-module="4">
                    <div class="module-title">
                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                        <span>模組 4：音頻錄製</span>
                    </div>
                    <div class="module-status">
                        <span class="status-tag status-pending">未開始</span>
                        <i class="fas fa-chevron-down module-toggle" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="module-content">
                    <div class="lesson-item" data-lesson="4-1">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">4.1 內置麥克風設置</div>
                        <div class="lesson-duration">2:40</div>
                    </div>
                    <div class="lesson-item" data-lesson="4-2">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">4.2 外接麥克風使用</div>
                        <div class="lesson-duration">3:50</div>
                    </div>
                </div>
            </div>
            
            <!-- 模組 5 -->
            <div class="module-item">
                <div class="module-header" data-module="5">
                    <div class="module-title">
                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                        <span>模組 5：RF 24-105 F4 鏡頭使用</span>
                    </div>
                    <div class="module-status">
                        <span class="status-tag status-pending">未開始</span>
                        <i class="fas fa-chevron-down module-toggle" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="module-content">
                    <div class="lesson-item" data-lesson="5-1">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">5.1 鏡頭特性與功能</div>
                        <div class="lesson-duration">4:30</div>
                    </div>
                    <div class="lesson-item" data-lesson="5-2">
                        <div class="lesson-check"></div>
                        <div class="lesson-title">5.2 焦距與構圖</div>
                        <div class="lesson-duration">3:20</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 課程行動按鈕 -->
        <div class="course-actions">
            <button id="markCompleteBtn" class="btn btn-primary">
                <i class="fas fa-check-circle" aria-hidden="true"></i>
                <span>完成當前章節</span>
            </button>
            <button id="nextModuleBtn" class="btn btn-outline" disabled>
                <span>下一章節</span>
                <i class="fas fa-arrow-right" aria-hidden="true"></i>
            </button>
        </div>
        
        <!-- 課程完成證書 (初始隱藏) -->
        <div class="course-certificate" id="courseCertificate">
            <h3 class="certificate-title">課程完成證書</h3>
            <p class="certificate-congrats">恭喜！您已成功完成「Canon R7 基礎視頻拍攝」課程</p>
            <img src="https://via.placeholder.com/300x200?text=Canon+R7+Course+Certificate" alt="課程證書" class="certificate-image">
            <p>證書已頒發給 <strong id="certificateName">學員</strong></p>
            <p>您現在可以借用 Canon EOS R7 和 RF 24-105 F4 鏡頭進行拍攝了！</p>
            <div class="points-earned">+100 積分</div>
        </div>
    </div>

    <!-- 底部導航 -->
    <nav class="bottom-nav">
        <a href="home.html" class="bottom-nav-item">
            <i class="fas fa-home bottom-nav-icon" aria-hidden="true"></i>
            <span class="bottom-nav-text" data-i18n="home">Home</span>
        </a>
        <a href="equipment.html" class="bottom-nav-item">
            <i class="fas fa-camera bottom-nav-icon" aria-hidden="true"></i>
            <span class="bottom-nav-text" data-i18n="equipment">Equipment</span>
        </a>
        <a href="learn.html" class="bottom-nav-item active">
            <i class="fas fa-graduation-cap bottom-nav-icon" aria-hidden="true"></i>
            <span class="bottom-nav-text" data-i18n="learn">Learn</span>
        </a>
        <a href="rio_ai.html" class="bottom-nav-item">
            <i class="fas fa-robot bottom-nav-icon" aria-hidden="true"></i>
            <span class="bottom-nav-text" data-i18n="rio_ai">Rio AI</span>
        </a>
        <a href="profile.html" class="bottom-nav-item">
            <i class="fas fa-user bottom-nav-icon" aria-hidden="true"></i>
            <span class="bottom-nav-text" data-i18n="profile">Profile</span>
        </a>
    </nav>

    <!-- JavaScript -->
    <script src="assets/js/language.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 檢查用戶是否已登入
            const currentUser = authUtils.getCurrentUser();
            if (!currentUser) {
                // 未登入則跳轉到登入頁
                window.location.href = 'login.html';
                return;
            }
            
            // 進度初始化
            let currentProgress = 0;
            const courseId = "C002"; // Canon R7 課程ID
            
            // 獲取用戶的課程進度
            const userCourse = currentUser.learningProgress.find(c => c.courseId === courseId);
            if (userCourse) {
                currentProgress = userCourse.progress;
                updateProgressBar(currentProgress);
                
                // 如果課程已完成，顯示證書
                if (userCourse.completed) {
                    showCertificate();
                }
            }
            
            // 更新進度條
            function updateProgressBar(progress) {
                const progressBar = document.getElementById('courseProgress');
                const progressText = document.getElementById('progressPercent');
                progressBar.style.width = progress + '%';
                progressText.textContent = progress + '%';
                
                // 保存進度到用戶數據
                authUtils.updateCourseProgress(currentUser.id, courseId, progress, progress === 100);
                
                // 如果進度達到100%，顯示證書
                if (progress === 100) {
                    showCertificate();
                    
                    // 增加用戶積分
                    const newPoints = currentUser.points + 100;
                    authUtils.updateUserPoints(currentUser.id, newPoints);
                }
            }
            
            // 顯示課程完成證書
            function showCertificate() {
                const certificate = document.getElementById('courseCertificate');
                certificate.style.display = 'block';
                document.getElementById('certificateName').textContent = currentUser.name;
                
                // 禁用完成按鈕
                document.getElementById('markCompleteBtn').disabled = true;
            }
            
            // 模組展開/折疊
            document.querySelectorAll('.module-header').forEach(header => {
                header.addEventListener('click', function() {
                    this.classList.toggle('active');
                    this.querySelector('.module-toggle').classList.toggle('active');
                    const content = this.nextElementSibling;
                    content.classList.toggle('active');
                });
            });
            
            // 測驗選項點擊
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionContainer = this.closest('.quiz-question');
                    const allOptions = questionContainer.querySelectorAll('.quiz-option');
                    
                    // 移除所有選項的選中狀態
                    allOptions.forEach(opt => {
                        opt.classList.remove('selected');
                        opt.querySelector('.option-radio').classList.remove('selected');
                    });
                    
                    // 設置當前選項為選中狀態
                    this.classList.add('selected');
                    this.querySelector('.option-radio').classList.add('selected');
                    
                    // 獲取選擇的答案和正確答案
                    const selectedAnswer = this.getAttribute('data-value');
                    const correctAnswer = 'B'; // 第一題正確答案是B
                    
                    // 顯示相應的反饋
                    if (selectedAnswer === correctAnswer) {
                        questionContainer.querySelector('.feedback-correct').style.display = 'block';
                        questionContainer.querySelector('.feedback-incorrect').style.display = 'none';
                    } else {
                        questionContainer.querySelector('.feedback-correct').style.display = 'none';
                        questionContainer.querySelector('.feedback-incorrect').style.display = 'block';
                    }
                });
            });
            
            // 標記當前模組完成
            document.getElementById('markCompleteBtn').addEventListener('click', function() {
                currentProgress += 20; // 每個模組20%的進度
                if (currentProgress > 100) currentProgress = 100;
                updateProgressBar(currentProgress);
                
                // 啟用下一章節按鈕
                document.getElementById('nextModuleBtn').disabled = false;
            });
            
            // 下一章節按鈕
            document.getElementById('nextModuleBtn').addEventListener('click', function() {
                // 在實際應用中，這裡應該會加載下一個模組的內容
                alert('在實際應用中，這會加載下一個模組的內容');
            });

            // 填充證書用戶名
            if (document.getElementById('certificateName')) {
                document.getElementById('certificateName').textContent = currentUser.name;
            }
        });
    </script>
</body>
</html>
