// Language translation file for REAL Platform
const translations = {
  zh: {
    platform_name: "REAL 平台",
    home: "首頁",
    equipment: "設備",
    learning: "學習",
    profile: "我的",
    points: "積分",
    level: "等級",
    search: "搜索",
    edit: "編輯",
    save: "保存",
    cancel: "取消",
    confirm: "確認",
    logout: "登出",
    update_info: "更新資料",
    back: "返回",
    send: "發送",
    create: "建立",
    close: "關閉",
    select: "選擇",
    basic: "基礎",
    intermediate: "進階",
    professional: "專業",
    qr_scanner: "QR碼掃描",
    scan_instruction: "請將鏡頭對準設備上的QR碼，系統將自動識別",
    view_details: "查看詳情",
    borrow_now: "立即借用",
    scan_success: "掃描成功",
    scan_failed: "掃描失敗",
    camera_permission: "請允許使用相機權限",
    status: "狀態",
    available: "可借用",
    borrowed: "已借出",
    login: "登入",
    student_account: "學生帳號",
    password: "密碼",
    password_placeholder: "輸入密碼（Demo 版可直接進入）",
    select_user: "請選擇用戶",
    demo_note: "Demo 版：任何用戶均可直接登入",
    recent_status: "借用狀態",
    no_equipment: "目前沒有借用中的設備",
    main_functions: "主要功能",
    ongoing_courses: "進行中課程",
    no_ongoing_courses: "目前沒有進行中的課程",
    continue_learning: "繼續學習",
    progress: "進度",
    completed: "已完成",
    equipment_rental: "設備借用",
    rental_date: "借用日期",
    select_rental_dates: "請選擇借用起始與結束日期",
    date_range: "日期範圍",
    rental_days: "借用天數",
    days: "天",
    points_calculation: "積分計算",
    your_points: "您的積分",
    required_points: "所需積分",
    points_after_rental: "借用後剩餘",
    confirm_rental: "確認借用",
    booking_success: "預訂成功",
    booking_failed: "預訂失敗",
    to: "至",
    points_deducted: "扣除積分",
    please_select_dates: "請選擇借用日期",
    equipment_not_found: "找不到設備信息",
    back_to_equipment: "返回設備頁面",
    required_level: "所需等級",
    level_warning: "您的等級不足，無法借用此設備。請先完成相關課程提升等級。",
    reserve_equipment: "預約借用",
    days_remaining: "剩餘",
    search_equipment: "搜索設備...",
    battery: "電池",
    sd_card: "記憶卡",
    equipment_category: "設備類別",
    all: "全部",
    camera: "相機",
    lens: "鏡頭",
    audio: "音頻",
    lighting: "燈光",
    stabilizer: "穩定器",
    accessory: "配件",
    available_equipment: "可用設備",
    no_matching_equipment: "沒有找到匹配的設備",
    unavailable: "已借出",
    difficulty: "難度",
    points_per_day: "積分/天",
    basic_info: "基本資訊",
    brand: "品牌",
    model: "型號",
    available_dates: "可借用日期",
    personal_preferences: "個人喜好設置",
    language: "語言",
    traditional_chinese: "繁體中文",
    english: "English",
    notifications: "通知",
    on: "開啟",
    off: "關閉",
    preferred_equipment: "偏好設備類型",
    project_deadline: "項目截止日期",
    no_rental_history: "目前沒有借用記錄",
    no_completed_courses: "目前沒有已完成的課程",
    rental_period: "借用期限",
    completion_date: "完成日期",
    points_consumed: "積分消耗",
    rented: "借用中",
    returned: "已歸還",
    my_group_members: "我的群組成員",
    project_member: "項目成員",
    no_group_members: "目前沒有群組成員",
    chat: "聊天室",
    recent_conversations: "最近對話",
    typing: "正在輸入...",
    online: "在線",
    members: "位成員",
    chat_info: "聊天資訊",
    message_placeholder: "輸入訊息...",
    new_chat: "新建聊天",
    chat_type: "聊天類型",
    individual_chat: "個人聊天",
    group_chat: "群組聊天",
    ai_assistant: "AI 助手",
    select_contacts: "選擇聯絡人",
    select_ai: "選擇 AI 助手",
    group_name: "群組名稱",
    group_name_placeholder: "輸入群組名稱",
    create_chat: "建立聊天",
    select_at_least_one: "請選擇至少一個聯絡人",
    enter_group_name: "請輸入群組名稱",
    chat_created: "聊天已建立！在完整版本中，這將創建一個新的聊天頻道。",
    error_loading_user_data: "載入用戶資料失敗，請重試",
    error_during_booking: "預訂過程中發生錯誤，請稍後再試",
    dates_no_longer_available: "所選日期已被預訂，請選擇其他日期",
    not_enough_points: "您的積分不足以完成此預訂",
    error_loading_courses: "載入課程資訊失敗",
    tripod: "三腳架/燈架",
    drone: "無人機",
    profile_title: "個人中心",
    my_profile: "我的資料",
    rental_history: "借用記錄",
    completed_courses: "已完成課程",
    settings: "設定",
    personal_info: "個人資訊",
    user_id: "用戶ID",
    user_name: "用戶名稱",
    user_email: "用戶電郵",
    change_password: "更改密碼",
    preferences: "偏好設定",
    notification_settings: "通知設定",
    app_theme: "App 主題",
    light_mode: "明亮模式",
    dark_mode: "暗黑模式",
    language_settings: "語言設定",
    logout_confirm: "您確定要登出嗎？",
    no_rental_history_message: "您目前沒有任何借用記錄。",
    no_completed_courses_message: "您目前尚未完成任何課程。",
    return_date: "歸還日期",
    score: "分數",
    learning_module: "學習模組",
    scan_qr: "掃描QR碼",
    loading: "資料載入中...",
    in_progress: "進行中",
    course_content: "課程內容",
    back_to_learning: "返回學習列表",
    loading_content: "正在加載課程內容...",
    error_loading_content: "加載課程內容失敗，請稍後再試。",
    no_course_specified: "未指定課程文件。",
    error: "錯誤",
    start_learning: "開始學習",
    no_courses_filter: "此分類下暫無課程。",
    course_content_not_available: "此課程內容暫不可用或格式不支持。",
    feature_in_development: "此功能正在開發中。",
    modules: "單元",
    error_loading_database_module: "加載數據庫模塊失敗，請刷新頁面重試。",
    pending_completion: "待完成",
    switch_language: "切換語言",
    select_user_prompt: "請先選擇一個用戶",
    login_failed: "登入失敗，請檢查您的選擇或稍後重試。",
    login_error: "登入過程中發生意外錯誤，請聯繫管理員。",
    equipment_icon: "器材圖標",
    status_in_use: "使用中",
    status_checking: "檢查中",
    status_damaged: "已損壞",
    status_unknown: "未知狀態 ({{status}})", 
    level_too_low_short: "等級不足",
    level_short: "等級",
    view_and_borrow: "查看並預約",
    available_on_date: "於 {{date}} 可借用",
    in_use_on_date: "於 {{date}} 已借出",
    status_not_available_general: "目前無法提供此設備",
    level_too_low_detailed: "您的等級 ({{currentUserLevel}}) 不足，此設備要求等級 {{reqLevel}}。請前往<a href='{{courseLink}}' class='underline text-blue-600 hover:text-blue-800'>學習中心</a>提升等級。",
    cannot_borrow: "無法預約",
    booked_on_selected_date: "此設備在 {{date}} 已被預訂。",
    no_matching_equipment_for_date: "在 {{date}} 沒有找到符合條件的設備。",
    computer: "電腦",
    communication: "通訊設備",
    monitor: "監視器",
    stroage: "儲存設備",
    utility: "實用工具",
    video_equipment: "視訊設備",
    status_available: "可借用",
    status_not_available: "無法借用",
    status_fully_functional: "功能正常",
    status_missing: "遺失",
    course_detail_page: "課程詳情",
    course_content_not_found: "找不到指定的課程內容。",
    stage_content_intro_text: "請觀看以下影片並閱讀器材簡介：",
    quiz_title_text_val: "小測驗",
    submit_answer_val: "提交答案",
    select_an_answer: "請選擇一個答案。",
    correct_answer_next_stage: "回答正確！您可以進入下一階段。",
    incorrect_answer_try_again: "回答錯誤，請再試一次。",
    previous_stage: "上一階段",
    next_stage_val: "下一階段",
    complete_course_val: "完成課程",
    course_completed_title: "恭喜！課程已完成！",
    course_completed_text: "您已成功完成此課程所有階段。",
    back_to_courses_list: "返回課程列表",
    complete_previous_stage_to_unlock: "請先完成上一階段的測驗以解鎖此階段。",
    quiz_passed_label: "測驗已通過",
    quiz_already_passed_message: "您已通過此階段的測驗。",
    login_to_save_progress_alert: "請先登入以保存您的學習進度。",
    you: "你",
    status_pending: "處理中",
    pending_pickup: "待取/預約中",
    overdue: "已逾期",
    no_courses_available: "目前沒有可用的課程。",
    no_courses_in_progress: "沒有正在進行中的課程。",
    no_courses_completed_yet: "尚無已完成的課程。",
    proceed_without_login_progress_warning: "您尚未登入，學習進度將不會被保存。要繼續瀏覽課程嗎？",
    login_recommended_for_progress: "建議登入以追踪您的學習進度。",
    quiz_question_prefix: "問題 {{num}}:",
    correct_answer_short: "回答正確！",
    incorrect_answer_short: "回答錯誤。",
    no_video_for_stage: "此階段沒有影片。",
    no_quiz_for_stage: "此階段沒有測驗。",
    complete_all_stage_quizzes: "請先完成本階段所有測驗問題才能進入下一階段或完成課程。",
    rental_detail_page: "訂單詳細資料",
    back_to_profile_rentals: "返回個人租借記錄",
    loading_order_details: "正在加載訂單詳細資料...",
    order_id_label: "訂單號",
    equipment_name: "器材名稱",
    total_points_consumed: "總消耗積分",
    booking_date: "預訂日期",
    order_qr_code_alt: "訂單 {{bookingId}} 的QR碼",
    order_qr_code_missing: "未能加載訂單QR碼",
    confirm_pickup_action: "確認取件",
    confirm_return_action: "確認歸還",
    order_already_returned: "此訂單已歸還。",
    order_action_not_applicable: "此訂單當前狀態無需操作。",
    order_not_found_or_invalid: "找不到訂單或訂單ID無效。",
    error_loading_order_details: "加載訂單詳情失敗。",
    pickup_confirmed_message: "訂單 {{bookingId}} 已成功確認取件！",
    return_confirmed_message: "訂單 {{bookingId}} 已成功確認歸還！",
    order_not_found_for_qr: "未找到與QR碼內容 [{{qr_content}}] 對應的訂單。",
    error_processing_qr: "處理QR碼時發生錯誤。",
    error_database_module_unavailable: "數據庫模塊不可用或加載失敗。",
    scan_failed_try_again: "掃描失敗，請重試。 (錯誤: {{error_msg}})",
    camera_permission_or_error: "無法啟動相機，請檢查權限或稍後重試。",
    action_failed_error: "操作失敗：{{error}}",
    confirm_action_button_label: "確認操作",
    scanned_order_details: "掃描的訂單詳情"
  },
  en: {
    platform_name: "REAL Platform",
    home: "Home",
    equipment: "Equipment",
    learning: "Learning",
    profile: "Profile",
    points: "Points",
    level: "Level",
    search: "Search",
    edit: "Edit",
    save: "Save",
    cancel: "Cancel",
    confirm: "Confirm",
    logout: "Logout",
    update_info: "Update Info",
    back: "Back",
    send: "Send",
    create: "Create",
    close: "Close",
    select: "Select",
    basic: "Basic",
    intermediate: "Intermediate",
    professional: "Professional",
    qr_scanner: "QR Code Scanner",
    scan_instruction: "Point the camera at a QR code on the equipment for automatic recognition",
    view_details: "View Details",
    borrow_now: "Borrow Now",
    scan_success: "Scan Successful",
    scan_failed: "Scan Failed",
    camera_permission: "Please allow camera permission",
    status: "Status",
    available: "Available",
    borrowed: "Borrowed",
    login: "Login",
    student_account: "Student Account",
    password: "Password",
    password_placeholder: "Enter password (Direct entry for Demo version)",
    select_user: "Please select a user",
    demo_note: "Demo version: Any user can login directly",
    recent_status: "Rental Status",
    no_equipment: "No equipment currently rented",
    main_functions: "Main Functions",
    ongoing_courses: "Ongoing Courses",
    no_ongoing_courses: "No ongoing courses at the moment",
    continue_learning: "Continue Learning",
    progress: "Progress",
    completed: "Completed",
    equipment_rental: "Equipment Rental",
    rental_date: "Rental Date",
    select_rental_dates: "Please select start and end dates for rental",
    date_range: "Date Range",
    rental_days: "Rental Days",
    days: "days",
    points_calculation: "Points Calculation",
    your_points: "Your Points",
    required_points: "Required Points",
    points_after_rental: "Remaining After Rental",
    confirm_rental: "Confirm Rental",
    booking_success: "Booking Successful",
    booking_failed: "Booking Failed",
    to: "to",
    points_deducted: "Points Deducted",
    please_select_dates: "Please select rental dates",
    equipment_not_found: "Equipment information not found",
    back_to_equipment: "Back to Equipment Page",
    required_level: "Required Level",
    level_warning: "Your level is insufficient to borrow this equipment. Please complete related courses to upgrade your level.",
    reserve_equipment: "Reserve Equipment",
    days_remaining: "Remaining",
    search_equipment: "Search equipment...",
    battery: "Battery",
    sd_card: "SD Card",
    equipment_category: "Equipment Category",
    all: "All",
    camera: "Camera",
    lens: "Lens",
    audio: "Audio",
    lighting: "Lighting",
    stabilizer: "Stabilizer",
    accessory: "Accessory",
    available_equipment: "Available Equipment",
    no_matching_equipment: "No matching equipment found",
    unavailable: "Unavailable",
    difficulty: "Difficulty",
    points_per_day: "Points/Day",
    basic_info: "Basic Information",
    brand: "Brand",
    model: "Model",
    available_dates: "Available Dates",
    personal_preferences: "Personal Preferences",
    language: "Language",
    traditional_chinese: "繁體中文",
    english: "English",
    notifications: "Notifications",
    on: "On",
    off: "Off",
    preferred_equipment: "Preferred Equipment Types",
    project_deadline: "Project Deadline",
    no_rental_history: "No rental history available",
    no_completed_courses: "No completed courses available",
    rental_period: "Rental Period",
    completion_date: "Completion Date",
    points_consumed: "Points Consumed",
    rented: "Rented",
    returned: "Returned",
    my_group_members: "My Group Members",
    project_member: "Project Member",
    no_group_members: "No group members available",
    chat: "Chat",
    recent_conversations: "Recent Conversations",
    typing: "Typing...",
    online: "Online",
    members: "members",
    chat_info: "Chat Info",
    message_placeholder: "Type a message...",
    new_chat: "New Chat",
    chat_type: "Chat Type",
    individual_chat: "Individual Chat",
    group_chat: "Group Chat",
    ai_assistant: "AI Assistant",
    select_contacts: "Select Contacts",
    select_ai: "Select AI Assistant",
    group_name: "Group Name",
    group_name_placeholder: "Enter group name",
    create_chat: "Create Chat",
    select_at_least_one: "Please select at least one contact",
    enter_group_name: "Please enter a group name",
    chat_created: "Chat created! This would create a new chat channel in the full version.",
    error_loading_user_data: "Failed to load user data, please try again",
    error_during_booking: "Error occurred during booking, please try again later",
    dates_no_longer_available: "Selected dates are no longer available, please choose other dates",
    not_enough_points: "You don't have enough points to complete this booking",
    error_loading_courses: "Failed to load course information",
    tripod: "Tripod/Lightstand",
    drone: "Drone",
    profile_title: "Profile Center",
    my_profile: "My Profile",
    rental_history: "Rental History",
    completed_courses: "Completed Courses",
    settings: "Settings",
    personal_info: "Personal Information",
    user_id: "User ID",
    user_name: "User Name",
    user_email: "User Email",
    change_password: "Change Password",
    preferences: "Preferences",
    notification_settings: "Notification Settings",
    app_theme: "App Theme",
    light_mode: "Light Mode",
    dark_mode: "Dark Mode",
    language_settings: "Language Settings",
    logout_confirm: "Are you sure you want to logout?",
    no_rental_history_message: "You currently have no rental records.",
    no_completed_courses_message: "You have not completed any courses yet.",
    return_date: "Return Date",
    score: "Score",
    learning_module: "Learning Module",
    scan_qr: "Scan QR Code",
    loading: "Loading data...",
    in_progress: "In Progress",
    course_content: "Course Content",
    back_to_learning: "Back to Learning List",
    loading_content: "Loading course content...",
    error_loading_content: "Failed to load course content. Please try again later.",
    no_course_specified: "No course file specified.",
    error: "Error",
    start_learning: "Start Learning",
    no_courses_filter: "No courses available under this filter.",
    course_content_not_available: "Course content is not available or format is not supported.",
    feature_in_development: "This feature is under development.",
    modules: "modules",
    error_loading_database_module: "Failed to load database module, please refresh the page and try again.",
    pending_completion: "Pending Completion",
    switch_language: "Switch Language",
    select_user_prompt: "Please select a user first.",
    login_failed: "Login failed. Please check your selection or try again later.",
    login_error: "An unexpected error occurred during login. Please contact an administrator.",
    equipment_icon: "Equipment Icon",
    status_in_use: "In Use",
    status_checking: "Checking",
    status_damaged: "Damaged",
    status_unknown: "Unknown Status ({{status}})", 
    level_too_low_short: "Level Too Low",
    level_short: "Lvl.",
    view_and_borrow: "View & Borrow",
    available_on_date: "Available on {{date}}",
    in_use_on_date: "In use on {{date}}",
    status_not_available_general: "This equipment is currently unavailable.",
    level_too_low_detailed: "Your level ({{currentUserLevel}}) is not sufficient. This equipment requires level {{reqLevel}}. Please visit the <a href='{{courseLink}}' class='underline text-blue-600 hover:text-blue-800'>Learning Center</a> to level up.",
    cannot_borrow: "Cannot Borrow",
    booked_on_selected_date: "Booked on {{date}}.",
    no_matching_equipment_for_date: "No matching equipment found for {{date}}.",
    computer: "Computer",
    communication: "Communication",
    monitor: "Monitor",
    stroage: "Storage",
    utility: "Utility",
    video_equipment: "Video Equipment",
    status_available: "Available",
    status_not_available: "Not Available",
    status_fully_functional: "Fully Functional",
    status_missing: "Missing",
    course_detail_page: "Course Detail",
    course_content_not_found: "Course content not found.",
    stage_content_intro_text: "Please watch the video below and read the equipment introduction:",
    quiz_title_text_val: "Quiz",
    submit_answer_val: "Submit Answer",
    select_an_answer: "Please select an answer.",
    correct_answer_next_stage: "Correct! You can proceed to the next stage.",
    incorrect_answer_try_again: "Incorrect answer, please try again.",
    previous_stage: "Previous Stage",
    next_stage_val: "Next Stage",
    complete_course_val: "Complete Course",
    course_completed_title: "Congratulations! Course Completed!",
    course_completed_text: "You have successfully completed all stages of this course.",
    back_to_courses_list: "Back to Courses List",
    complete_previous_stage_to_unlock: "Please complete the previous stage's quiz to unlock this stage.",
    quiz_passed_label: "Quiz Passed",
    quiz_already_passed_message: "You have already passed the quiz for this stage.",
    login_to_save_progress_alert: "Please log in to save your learning progress.",
    you: "You",
    status_pending: "Pending",
    pending_pickup: "Pending Pickup/Reserved",
    overdue: "Overdue",
    no_courses_available: "No courses currently available.",
    no_courses_in_progress: "No courses in progress.",
    no_courses_completed_yet: "No courses completed yet.",
    proceed_without_login_progress_warning: "You are not logged in. Your learning progress will not be saved. Do you want to continue browsing courses?",
    login_recommended_for_progress: "Login is recommended to track your learning progress.",
    quiz_question_prefix: "Question {{num}}:",
    correct_answer_short: "Correct!",
    incorrect_answer_short: "Incorrect.",
    no_video_for_stage: "(No video for this stage)",
    no_quiz_for_stage: "(No quiz for this stage)",
    complete_all_stage_quizzes: "Please answer all quiz questions correctly in this stage to proceed or complete the course.",
    rental_detail_page: "Rental Detail",
    back_to_profile_rentals: "Back to Profile Rentals",
    loading_order_details: "Loading order details...",
    order_id_label: "Order ID",
    equipment_name: "Equipment Name",
    total_points_consumed: "Total Points Consumed",
    booking_date: "Booking Date",
    order_qr_code_alt: "QR Code for Order {{bookingId}}",
    order_qr_code_missing: "Failed to load order QR Code",
    confirm_pickup_action: "Confirm Pickup",
    confirm_return_action: "Confirm Return",
    order_already_returned: "This order has already been returned.",
    order_action_not_applicable: "No action applicable for this order's current status.",
    order_not_found_or_invalid: "Order not found or invalid Order ID.",
    error_loading_order_details: "Failed to load order details.",
    pickup_confirmed_message: "Order {{bookingId}} pickup confirmed successfully!",
    return_confirmed_message: "Order {{bookingId}} return confirmed successfully!",
    order_not_found_for_qr: "Order not found for QR Code content [{{qr_content}}].",
    error_processing_qr: "Error processing QR Code.",
    error_database_module_unavailable: "Database module unavailable or failed to load.",
    scan_failed_try_again: "Scan failed, please try again. (Error: {{error_msg}})",
    camera_permission_or_error: "Could not start camera. Please check permissions or try again later.",
    action_failed_error: "Action failed: {{error}}",
    confirm_action_button_label: "Confirm Action",
    scanned_order_details: "Scanned Order Details"
  }
};

// Function to get translation
function t(key, lang, options = {}) {
  let currentLang = lang || localStorage.getItem('language') || 'zh';
  
  if (!translations[currentLang]) {
    currentLang = 'zh';
  }

  let translation = '';
  if (translations[currentLang] && typeof translations[currentLang][key] !== 'undefined') {
    translation = translations[currentLang][key];
  } else {
    if (currentLang !== 'en' && translations['en'] && typeof translations['en'][key] !== 'undefined') {
        translation = translations['en'][key];
    } 
    else if (currentLang !== 'zh' && translations['zh'] && typeof translations['zh'][key] !== 'undefined') {
        translation = translations['zh'][key];
    } else {
        translation = key; 
    }
  }

  if (typeof translation === 'string') {
    for (const placeholder in options) {
      if (Object.hasOwnProperty.call(options, placeholder)) {
        translation = translation.replace(new RegExp(`{{${placeholder}}}`, 'g'), options[placeholder]);
      }
    }
  }
  return translation;
}

// Function to switch language
function switchLanguage(lang) {
  localStorage.setItem('language', lang);
  applyTranslations(); 
}

// Initialize language preference and apply translations
document.addEventListener('DOMContentLoaded', function() {
  if (!localStorage.getItem('language')) {
    localStorage.setItem('language', 'zh');
  }
  applyTranslations();
  
  const header = document.querySelector('header .flex.items-center'); 
  if (header && !document.getElementById('languageSwitcher')) {
    const languageSwitcher = document.createElement('button');
    languageSwitcher.id = 'languageSwitcher';
    languageSwitcher.className = 'text-white ml-2'; 
    languageSwitcher.setAttribute('aria-label', 'Switch Language');
    languageSwitcher.innerHTML = `<i class="fas fa-globe"></i>`; 
    languageSwitcher.addEventListener('click', function() {
      const currentLang = localStorage.getItem('language') || 'zh';
      const newLang = currentLang === 'zh' ? 'en' : 'zh';
      switchLanguage(newLang);
    });
    const firstChild = header.firstChild;
    if (firstChild) {
        header.insertBefore(languageSwitcher, firstChild);
    } else {
        header.appendChild(languageSwitcher);
    }
  }
});

// Function to apply translations to the page
function applyTranslations() {
  const currentLang = localStorage.getItem('language') || 'zh';
  
  if (document.title.includes(t('platform_name', currentLang === 'zh' ? 'en' : 'zh'))) { 
      document.title = document.title.replace(t('platform_name', currentLang === 'zh' ? 'en' : 'zh'), t('platform_name', currentLang));
  } else if (document.title.includes("REAL Platform")) { 
      document.title = document.title.replace("REAL Platform", t('platform_name', currentLang));
  } else if (document.title.includes("REAL 平台")) { 
      document.title = document.title.replace("REAL 平台", t('platform_name', currentLang));
  }

  const langSwitcherButton = document.getElementById('languageSwitcher');
  if (langSwitcherButton) {
    langSwitcherButton.setAttribute('aria-label', t('switch_language', currentLang) || 'Switch Language');
  }
  
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (key) {
      element.textContent = t(key, currentLang);
    }
  });
  
  document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
    const key = element.getAttribute('data-i18n-placeholder');
    if (key) {
      element.placeholder = t(key, currentLang);
    }
  });
  
  document.querySelectorAll('[data-i18n-aria]').forEach(element => {
    const key = element.getAttribute('data-i18n-aria');
    if (key) {
      element.setAttribute('aria-label', t(key, currentLang));
    }
  });

  document.querySelectorAll('[data-i18n-title]').forEach(element => {
    const key = element.getAttribute('data-i18n-title');
    if (key) {
      element.setAttribute('title', t(key, currentLang));
    }
  });
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', applyTranslations);
} else {
    applyTranslations();
}